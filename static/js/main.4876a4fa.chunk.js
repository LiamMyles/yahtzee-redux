(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,r,t){e.exports=t(16)},,,,,,function(e,r,t){},function(e,r,t){},function(e,r,t){},function(e,r,t){"use strict";t.r(r);var c=t(0),a=t.n(c),n=t(6),o=t.n(n),s=(t(13),t(4)),l=t(3),i=t(1),u=(t(14),t(15),t(2));function d(e){var r=e.side,t=void 0===r?1:r,c=e.theme,n=void 0===c?1:c,o=e.clickFunction,s=e.isHeld;return a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:"die die--theme-".concat(n+(s?1:0)),"data-current-side":t,onClick:o},a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"})))}function m(){return Math.floor(6*Math.random())+1}var S={dice:Object(u.a)(Array(5)).map(function(){return{theme:3,side:1,isRolling:!1,isHeld:!1}}),currentRoll:0,currentDice:[1,1,1,1,1]};function p(e,r){var t=r.type,c=r.dieNumber,a=r.isFirstRound;switch(t){case"rollDie":var n=e.dice.map(function(e,r){return c!==r||e.isHeld?e:Object(i.a)({},e,{side:m()})});return Object(i.a)({},e,{dice:n});case"rollDice":var o=e.dice.map(function(e){return e.isHeld?Object(i.a)({},e):Object(i.a)({},e,{side:m()})});return Object(i.a)({},e,{dice:o,currentRoll:e.currentRoll+1});case"toggleHold":if(a)return e;var s=e.dice.map(function(e,r){return c===r?Object(i.a)({},e,{isHeld:!e.isHeld}):e});return Object(i.a)({},e,{dice:s});case"resetHeld":var l=e.dice.map(function(e){return Object(i.a)({},e,{isHeld:!1})});return Object(i.a)({},e,{dice:l});default:throw new Error}}function f(e){var r=e.dispatchGameState,t=e.isOutOfRolls,n=e.isFirstRound,o=Object(c.useReducer)(p,S),l=Object(s.a)(o,2),i=l[0],u=l[1],m=function(e){var r=Object(c.useRef)();return Object(c.useEffect)(function(){r.current=e}),r.current}(i.currentRoll);return Object(c.useEffect)(function(){i.currentRoll===m+1&&r({type:"updateCurrentRoll",currentDice:i.dice.map(function(e){return e.side})})},[i,r,m]),Object(c.useEffect)(function(){u({type:"resetHeld"})},[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"dice"},i.dice.map(function(e,r){return a.a.createElement("div",{key:r},a.a.createElement(d,{side:n?1:e.side,theme:e.theme,isHeld:e.isHeld,clickFunction:function(){u({type:"toggleHold",dieNumber:r,isFirstRound:n})}}))})),a.a.createElement("button",{className:"roll-dice-button",disabled:t,onClick:function(){u({type:"rollDice"})}},a.a.createElement("span",{className:"roll-dice-button__background"}),"Roll All"))}var h={upper:{ones:{score:0,isScored:!1},twos:{score:0,isScored:!1},threes:{score:0,isScored:!1},fours:{score:0,isScored:!1},fives:{score:0,isScored:!1},sixes:{score:0,isScored:!1}},lower:{threeKinds:{score:0,isScored:!1},fourKinds:{score:0,isScored:!1},smallStraight:{score:0,isScored:!1},longStraight:{score:0,isScored:!1},chance:{score:0,isScored:!1},yahtzee:{score:0,isScored:!1,count:0}},allScoresScored:!1};function b(e,r){var t=r.type,c=r.alias,a=r.score,n=r.section;switch(t){case"addScore":var o=Object(i.a)({},e,Object(l.a)({},n,Object(i.a)({},e[n],Object(l.a)({},c,Object(i.a)({},e[n][c],{score:a,isScored:!0},"yahtzee"===c&&{count:e[n][c].count+1}))))),s=[],u=function(e,r){for(var t in e)e.hasOwnProperty(t)&&r.push(e[t].isScored)};u(o.upper,s),u(o.lower,s);var d=s.every(function(e){return e});return Object(i.a)({},o,{allScoresScored:d});default:throw new Error}}function v(e){var r=e.dice,t=e.dispatchGameState,n=e.canScore,o=e.diceRoll,l=Object(c.useReducer)(b,h),i=Object(s.a)(l,2),u=i[0],d=i[1];Object(c.useEffect)(function(){u.allScoresScored&&t({type:"allScoresScored"})},[u.allScoresScored,t]);var m=function(e){var r=Object(c.useRef)();return Object(c.useEffect)(function(){r.current=e}),r.current}(u.lower.yahtzee.count);return Object(c.useEffect)(function(){m<u.lower.yahtzee.count&&t({type:"scoredYahtzee"})},[u.lower.yahtzee.count,t,m]),a.a.createElement(a.a.Fragment,null,a.a.createElement(O,{dice:r,scoreState:u,canScore:n}),a.a.createElement(E,{dice:r,diceRoll:o,dispatchScores:d,dispatchGameState:t,canScore:n,scoreState:u}))}function E(e){var r=e.dice,t=e.diceRoll,c=e.dispatchScores,n=e.dispatchGameState,o=e.canScore,s=e.scoreState,l=function(e,t){return e.map(function(e){var c=e.alias,a=e.test;return{isScored:s[t][c].isScored,isValidScore:a(r)}}).every(function(e){var r=e.isScored,t=e.isValidScore;return r||!t})},i=l(g.upper,"upper"),u=l(g.lower,"lower"),d=3===t&&i&&u;return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"score-selection"},a.a.createElement("ul",{className:"score-selection__buttons score-selection__buttons--upper"},g.upper.map(function(e){var t=e.name,l=e.test,i=(e.topScore,e.getScore),u=e.alias;return a.a.createElement(y,{mustScoreZero:d,canScore:o,section:"upper",currentScore:i(r),isValidScore:l(r),name:t,isScored:s.upper[u].isScored,dispatchScores:c,dispatchGameState:n,alias:u,key:u})})),a.a.createElement("ul",{className:"score-selection__buttons score-selection__buttons--lower"},g.lower.map(function(e){var t=e.name,l=e.test,i=(e.topScore,e.getScore),u=e.alias;return a.a.createElement(y,{mustScoreZero:d,canScore:o,section:"lower",currentScore:i(r),isValidScore:l(r),key:u,isScored:s.lower[u].isScored,dispatchScores:c,dispatchGameState:n,alias:u,name:t})}))))}function y(e){var r=e.name,t=e.isValidScore,c=e.currentScore,n=e.isScored,o=e.dispatchScores,s=e.alias,l=e.section,i=e.canScore,u=e.dispatchGameState,d=e.mustScoreZero;if(!1===i||d&&n||!d&&!t||!d&&n&&"yahtzee"!==s)return!1;var m=!d&&!t&&"yahtzee"!==s,S=d?0:c;return a.a.createElement("button",{className:"score-selection-button",onClick:function(){o({type:"addScore",alias:s,section:l,score:S}),u({type:"addScore",section:l,score:S})},disabled:m},d?"Score Zero on ".concat(r):a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"score-selection-button__name"},r),a.a.createElement("span",{className:"score-selection-button__score"},c)))}function O(e){e.dice;var r=e.scoreState;e.canScore;return a.a.createElement("section",{className:"score-board"},a.a.createElement("ul",{className:"score-board__scores score-board__scores--upper-section"},g.upper.map(function(e){var t=e.name,c=e.alias;return a.a.createElement(j,{key:c,isScored:r.upper[c].isScored,scoredScore:r.upper[c].score,alias:c,name:t})})),a.a.createElement("ul",{className:"score-board__scores score-board__scores--lower-section"},g.lower.map(function(e){var t=e.name,c=e.alias;return a.a.createElement(j,{key:c,isScored:r.lower[c].isScored,scoredScore:r.lower[c].score,alias:c,yathzeeCount:r.lower[c].count,name:t})})))}function j(e){var r=e.name,t=e.isScored,c=e.scoredScore,n=e.alias,o=e.yathzeeCount;return a.a.createElement("li",{className:"score-board__score"},a.a.createElement("span",{className:"score-board__score-name"},r," "),a.a.createElement("span",{className:"score-board__score-scored ".concat(t?"score-board__score-scored--score-added":"")},t&&c),"yahtzee"===n&&o>1&&Object(u.a)(Array(o)).map(function(e,r){return a.a.createElement("span",{key:r},"*")}))}function _(e){return function(r){return r.filter(function(r){return r===e}).reduce(function(e,r){return e+r},0)}}var g={upper:[{test:function(e){return e.includes(1)},name:"Ones",alias:"ones",topScore:5,getScore:_(1)},{test:function(e){return e.includes(2)},name:"Twos",alias:"twos",topScore:10,getScore:_(2)},{test:function(e){return e.includes(3)},name:"Threes",alias:"threes",topScore:15,getScore:_(3)},{test:function(e){return e.includes(4)},name:"Fours",alias:"fours",topScore:20,getScore:_(4)},{test:function(e){return e.includes(5)},name:"Fives",alias:"fives",topScore:25,getScore:_(5)},{test:function(e){return e.includes(6)},name:"Sixes",alias:"sixes",topScore:30,getScore:_(6)}],lower:[{test:function(e){var r=Object(u.a)(e);r.sort();var t=r.slice(0,3),c=r.slice(2);return t.every(function(e){return e===t[0]})||c.every(function(e){return e===c[0]})},name:"Three of a Kind",alias:"threeKinds",topScore:18,getScore:function(e){var r=Object(u.a)(e);r.sort();var t=r.slice(0,3),c=r.slice(2);return t.every(function(e){return e===t[0]})?3*t[0]:c.every(function(e){return e===c[0]})?3*c[0]:void 0}},{test:function(e){var r=Object(u.a)(e);r.sort();var t=r.slice(0,4),c=r.slice(1);return t.every(function(e){return e===t[0]})||c.every(function(e){return e===c[0]})},name:"Four of a Kind",alias:"fourKinds",topScore:24,getScore:function(e){var r=Object(u.a)(e);r.sort();var t=r.slice(0,4),c=r.slice(1);return t.every(function(e){return e===t[0]})?4*t[0]:c.every(function(e){return e===c[0]})?4*c[0]:void 0}},{test:function(e){var r=Object(u.a)(e);r.sort();var t=r.slice(0,4),c=r.slice(2),a=function(e,r,t){return r===t.length-1||e+1===t[r+1]};return t.every(a)||c.every(a)},name:"Small Straight",alias:"smallStraight",topScore:30,getScore:function(e){var r=Object(u.a)(e);r.sort();var t=r.slice(0,4),c=r.slice(2),a=function(e,r,t){return r===t.length-1||e+1===t[r+1]};return t.every(a)||c.every(a)?30:0}},{test:function(e){var r=Object(u.a)(e);r.sort();return r.every(function(e,r,t){return r===t.length-1||e+1===t[r+1]})},name:"Long Straight",alias:"longStraight",topScore:40,getScore:function(e){var r=Object(u.a)(e);r.sort();return r.every(function(e,r,t){return r===t.length-1||e+1===t[r+1]})?40:0}},{test:function(){return!0},name:"Chance",alias:"chance",topScore:30,getScore:function(e){return e.reduce(function(e,r){return e+r},0)}},{test:function(e){return 1===new Set(e).size},name:"Yahtzee",alias:"yahtzee",topScore:50,getScore:function(){return 50}}]},w={totalScores:{lower:0,upper:0,yahtzees:0},currentRound:0,currentDiceRoll:0,currentDice:[1,1,1,1,1],hasYathzeed:!1,allScoresScored:!1};function R(e,r){var t=r.type,c=r.score,a=r.section,n=r.currentDice;switch(t){case"addScore":return Object(i.a)({},e,{totalScores:Object(i.a)({},e.totalScores,Object(l.a)({},a,e.totalScores[a]+c)),currentRound:e.currentRound+1,currentDiceRoll:0});case"scoredYahtzee":return e.hasYathzeed?Object(i.a)({},e,{totalScores:Object(i.a)({},e.totalScores,{yahtzees:e.totalScores.yahtzees+1})}):Object(i.a)({},e,{hasYathzeed:!0,totalScores:Object(i.a)({},e.totalScores,{yahtzees:e.totalScores.yahtzees+1})});case"updateCurrentRoll":return Object(i.a)({},e,{currentDice:n,currentDiceRoll:e.currentDiceRoll+1});case"allScoresScored":return Object(i.a)({},e,{allScoresScored:!0});default:throw new Error}}var N=function(){var e=Object(c.useReducer)(R,w),r=Object(s.a)(e,2),t=r[0],n=r[1],o=t.totalScores.upper,l=t.totalScores.lower,i=o>=63?35:0,u=t.totalScores.yahtzees>1?100*t.totalScores.yahtzees:0,d=o+l+i+u;return a.a.createElement(a.a.Fragment,null,t.allScoresScored?a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"THE GAME IS OVER! "),a.a.createElement("h2",null,"Final Score: ",d),a.a.createElement("div",{className:"bonus-scores"},0!==i&&a.a.createElement("span",{className:"bonus-scores__upper"},"Upper Bonus:",a.a.createElement("span",null,i)),0!==u&&a.a.createElement("span",{className:"bonus-scores__yathzee"},"Yahtzee Bonus:",a.a.createElement("span",{className:"bonus-scores__score"},u)))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title-card"},a.a.createElement("h1",{className:"title-card__main"},"Yahtzee Redux!"),a.a.createElement("h2",{className:"title-card__upper"},"Upper"),a.a.createElement("h2",{className:"title-card__lower"},"Lower")),a.a.createElement(v,{dice:t.currentDice,diceRoll:t.currentDiceRoll,dispatchGameState:n,canScore:t.currentDiceRoll>0}),a.a.createElement("div",{className:"dice-wrapper"},a.a.createElement("div",{className:"round-tracker"},a.a.createElement("h2",null,"Roll"),Array.from({length:3},function(e,r){var c="round-tracker__counter".concat(r<t.currentDiceRoll?" round-tracker__counter--counted":"");return a.a.createElement("div",{className:c})})),a.a.createElement(f,{dispatchGameState:n,isOutOfRolls:3===t.currentDiceRoll,isFirstRound:0===t.currentDiceRoll}))))};o.a.render(a.a.createElement(N,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.4876a4fa.chunk.js.map