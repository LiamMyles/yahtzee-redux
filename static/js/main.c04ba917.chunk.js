(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(e,t,r){e.exports=r(16)},,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var c=r(0),a=r.n(c),n=r(6),o=r.n(n),s=(r(13),r(4)),l=r(3),i=r(1),u=(r(14),r(15),r(2));function d(e){var t=e.side,r=void 0===t?1:t,c=e.theme,n=void 0===c?1:c,o=e.clickFunction,s=e.isHeld;return a.a.createElement(a.a.Fragment,null,s&&a.a.createElement("h1",null,"Holding"),a.a.createElement("ul",{className:"die die--theme-".concat(n),"data-current-side":r,onClick:o},a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"}),a.a.createElement("li",{className:"pip"})))}function m(){return Math.floor(6*Math.random())+1}var S={dice:Object(u.a)(Array(5)).map(function(){return{theme:3,side:1,isRolling:!1,isHeld:!1}}),currentRoll:0,currentDice:[1,1,1,1,1]};function p(e,t){var r=t.type,c=t.dieNumber,a=t.isFirstRound;switch(r){case"rollDie":var n=e.dice.map(function(e,t){return c!==t||e.isHeld?e:Object(i.a)({},e,{side:m()})});return Object(i.a)({},e,{dice:n});case"rollDice":var o=e.dice.map(function(e){return e.isHeld?Object(i.a)({},e):Object(i.a)({},e,{side:m()})});return Object(i.a)({},e,{dice:o,currentRoll:e.currentRoll+1});case"toggleHold":if(a)return e;var s=e.dice.map(function(e,t){return c===t?Object(i.a)({},e,{isHeld:!e.isHeld}):e});return Object(i.a)({},e,{dice:s});case"resetHeld":var l=e.dice.map(function(e){return Object(i.a)({},e,{isHeld:!1})});return Object(i.a)({},e,{dice:l});default:throw new Error}}function f(e){var t=e.dispatchGameState,r=e.isOutOfRolls,n=e.isFirstRound,o=Object(c.useReducer)(p,S),l=Object(s.a)(o,2),i=l[0],u=l[1],m=function(e){var t=Object(c.useRef)();return Object(c.useEffect)(function(){t.current=e}),t.current}(i.currentRoll);return Object(c.useEffect)(function(){i.currentRoll===m+1&&t({type:"updateCurrentRoll",currentDice:i.dice.map(function(e){return e.side})})},[i,t,m]),Object(c.useEffect)(function(){u({type:"resetHeld"})},[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"dice"},i.dice.map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement(d,{side:n?1:e.side,theme:e.theme,isHeld:e.isHeld,clickFunction:function(){u({type:"toggleHold",dieNumber:t,isFirstRound:n})}}))})),a.a.createElement("button",{className:"roll-dice-button",disabled:r,onClick:function(){u({type:"rollDice"})}},a.a.createElement("span",{className:"roll-dice-button__background"}),"Roll All"))}var h={upper:{ones:{score:0,isScored:!1},twos:{score:0,isScored:!1},threes:{score:0,isScored:!1},fours:{score:0,isScored:!1},fives:{score:0,isScored:!1},sixes:{score:0,isScored:!1}},lower:{threeKinds:{score:0,isScored:!1},fourKinds:{score:0,isScored:!1},smallStraight:{score:0,isScored:!1},longStraight:{score:0,isScored:!1},chance:{score:0,isScored:!1},yahtzee:{score:0,isScored:!1,count:0}},allScoresScored:!1};function b(e,t){var r=t.type,c=t.alias,a=t.score,n=t.section;switch(r){case"addScore":var o=Object(i.a)({},e,Object(l.a)({},n,Object(i.a)({},e[n],Object(l.a)({},c,Object(i.a)({},e[n][c],{score:a,isScored:!0},"yahtzee"===c&&{count:e[n][c].count+1}))))),s=[],u=function(e,t){for(var r in e)e.hasOwnProperty(r)&&t.push(e[r].isScored)};u(o.upper,s),u(o.lower,s);var d=s.every(function(e){return e});return Object(i.a)({},o,{allScoresScored:d});default:throw new Error}}function v(e){var t=e.dice,r=e.dispatchGameState,n=e.canScore,o=e.diceRoll,l=Object(c.useReducer)(b,h),i=Object(s.a)(l,2),u=i[0],d=i[1];Object(c.useEffect)(function(){u.allScoresScored&&r({type:"allScoresScored"})},[u.allScoresScored,r]);var m=function(e){var t=Object(c.useRef)();return Object(c.useEffect)(function(){t.current=e}),t.current}(u.lower.yahtzee.count);return Object(c.useEffect)(function(){m<u.lower.yahtzee.count&&r({type:"scoredYahtzee"})},[u.lower.yahtzee.count,r,m]),a.a.createElement(a.a.Fragment,null,a.a.createElement(O,{dice:t,scoreState:u,canScore:n}),a.a.createElement(E,{dice:t,diceRoll:o,dispatchScores:d,dispatchGameState:r,canScore:n,scoreState:u}))}function E(e){var t=e.dice,r=e.diceRoll,c=e.dispatchScores,n=e.dispatchGameState,o=e.canScore,s=e.scoreState,l=function(e,r){return e.map(function(e){var c=e.alias,a=e.test;return{isScored:s[r][c].isScored,isValidScore:a(t)}}).every(function(e){var t=e.isScored,r=e.isValidScore;return t||!r})},i=l(g.upper,"upper"),u=l(g.lower,"lower"),d=3===r&&i&&u;return a.a.createElement(a.a.Fragment,null,a.a.createElement("section",{className:"score-selection"},a.a.createElement("ul",{className:"score-selection__buttons score-selection__buttons--upper"},g.upper.map(function(e){var r=e.name,l=e.test,i=(e.topScore,e.getScore),u=e.alias;return a.a.createElement(y,{mustScoreZero:d,canScore:o,section:"upper",currentScore:i(t),isValidScore:l(t),name:r,isScored:s.upper[u].isScored,dispatchScores:c,dispatchGameState:n,alias:u,key:u})})),a.a.createElement("ul",{className:"score-selection__buttons score-selection__buttons--lower"},g.lower.map(function(e){var r=e.name,l=e.test,i=(e.topScore,e.getScore),u=e.alias;return a.a.createElement(y,{mustScoreZero:d,canScore:o,section:"lower",currentScore:i(t),isValidScore:l(t),key:u,isScored:s.lower[u].isScored,dispatchScores:c,dispatchGameState:n,alias:u,name:r})}))))}function y(e){var t=e.name,r=e.isValidScore,c=e.currentScore,n=e.isScored,o=e.dispatchScores,s=e.alias,l=e.section,i=e.canScore,u=e.dispatchGameState,d=e.mustScoreZero;if(!1===i||d&&n||!d&&!r||!d&&n&&"yahtzee"!==s)return!1;var m=!d&&!r&&"yahtzee"!==s,S=d?0:c;return a.a.createElement("button",{className:"score-selection-button",onClick:function(){o({type:"addScore",alias:s,section:l,score:S}),u({type:"addScore",section:l,score:S})},disabled:m},d?"Score Zero on ".concat(t):a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"score-selection-button__name"},t),a.a.createElement("span",{className:"score-selection-button__score"},c)))}function O(e){e.dice;var t=e.scoreState;e.canScore;return a.a.createElement("section",{className:"score-board"},a.a.createElement("ul",{className:"score-board__scores score-board__scores--upper-section"},g.upper.map(function(e){var r=e.name,c=e.alias;return a.a.createElement(j,{key:c,isScored:t.upper[c].isScored,scoredScore:t.upper[c].score,alias:c,name:r})})),a.a.createElement("ul",{className:"score-board__scores score-board__scores--lower-section"},g.lower.map(function(e){var r=e.name,c=e.alias;return a.a.createElement(j,{key:c,isScored:t.lower[c].isScored,scoredScore:t.lower[c].score,alias:c,yathzeeCount:t.lower[c].count,name:r})})))}function j(e){var t=e.name,r=e.isScored,c=e.scoredScore,n=e.alias,o=e.yathzeeCount;return a.a.createElement("li",{className:"score-board__score"},a.a.createElement("span",{className:"score-board__score-name"},t," "),a.a.createElement("span",{className:"score-board__score-scored ".concat(r?"score-board__score-scored--score-added":"")},r&&c),"yahtzee"===n&&o>1&&Object(u.a)(Array(o)).map(function(e,t){return a.a.createElement("span",{key:t},"*")}))}function _(e){return function(t){return t.filter(function(t){return t===e}).reduce(function(e,t){return e+t},0)}}var g={upper:[{test:function(e){return e.includes(1)},name:"Ones",alias:"ones",topScore:5,getScore:_(1)},{test:function(e){return e.includes(2)},name:"Twos",alias:"twos",topScore:10,getScore:_(2)},{test:function(e){return e.includes(3)},name:"Threes",alias:"threes",topScore:15,getScore:_(3)},{test:function(e){return e.includes(4)},name:"Fours",alias:"fours",topScore:20,getScore:_(4)},{test:function(e){return e.includes(5)},name:"Fives",alias:"fives",topScore:25,getScore:_(5)},{test:function(e){return e.includes(6)},name:"Sixes",alias:"sixes",topScore:30,getScore:_(6)}],lower:[{test:function(e){var t=Object(u.a)(e);t.sort();var r=t.slice(0,3),c=t.slice(2);return r.every(function(e){return e===r[0]})||c.every(function(e){return e===c[0]})},name:"Three of a Kind",alias:"threeKinds",topScore:18,getScore:function(e){var t=Object(u.a)(e);t.sort();var r=t.slice(0,3),c=t.slice(2);return r.every(function(e){return e===r[0]})?3*r[0]:c.every(function(e){return e===c[0]})?3*c[0]:void 0}},{test:function(e){var t=Object(u.a)(e);t.sort();var r=t.slice(0,4),c=t.slice(1);return r.every(function(e){return e===r[0]})||c.every(function(e){return e===c[0]})},name:"Four of a Kind",alias:"fourKinds",topScore:24,getScore:function(e){var t=Object(u.a)(e);t.sort();var r=t.slice(0,4),c=t.slice(1);return r.every(function(e){return e===r[0]})?4*r[0]:c.every(function(e){return e===c[0]})?4*c[0]:void 0}},{test:function(e){var t=Object(u.a)(e);t.sort();var r=t.slice(0,4),c=t.slice(2),a=function(e,t,r){return t===r.length-1||e+1===r[t+1]};return r.every(a)||c.every(a)},name:"Small Straight",alias:"smallStraight",topScore:30,getScore:function(e){var t=Object(u.a)(e);t.sort();var r=t.slice(0,4),c=t.slice(2),a=function(e,t,r){return t===r.length-1||e+1===r[t+1]};return r.every(a)||c.every(a)?30:0}},{test:function(e){var t=Object(u.a)(e);t.sort();return t.every(function(e,t,r){return t===r.length-1||e+1===r[t+1]})},name:"Long Straight",alias:"longStraight",topScore:40,getScore:function(e){var t=Object(u.a)(e);t.sort();return t.every(function(e,t,r){return t===r.length-1||e+1===r[t+1]})?40:0}},{test:function(){return!0},name:"Chance",alias:"chance",topScore:30,getScore:function(e){return e.reduce(function(e,t){return e+t},0)}},{test:function(e){return 1===new Set(e).size},name:"Yahtzee",alias:"yahtzee",topScore:50,getScore:function(){return 50}}]},w={totalScores:{lower:0,upper:0,yahtzees:0},currentRound:0,currentDiceRoll:0,currentDice:[1,1,1,1,1],hasYathzeed:!1,allScoresScored:!1};function R(e,t){var r=t.type,c=t.score,a=t.section,n=t.currentDice;switch(r){case"addScore":return Object(i.a)({},e,{totalScores:Object(i.a)({},e.totalScores,Object(l.a)({},a,e.totalScores[a]+c)),currentRound:e.currentRound+1,currentDiceRoll:0});case"scoredYahtzee":return e.hasYathzeed?Object(i.a)({},e,{totalScores:Object(i.a)({},e.totalScores,{yahtzees:e.totalScores.yahtzees+1})}):Object(i.a)({},e,{hasYathzeed:!0,totalScores:Object(i.a)({},e.totalScores,{yahtzees:e.totalScores.yahtzees+1})});case"updateCurrentRoll":return Object(i.a)({},e,{currentDice:n,currentDiceRoll:e.currentDiceRoll+1});case"allScoresScored":return Object(i.a)({},e,{allScoresScored:!0});default:throw new Error}}var N=function(){var e=Object(c.useReducer)(R,w),t=Object(s.a)(e,2),r=t[0],n=t[1],o=r.totalScores.upper,l=r.totalScores.lower,i=o>=63?35:0,u=r.totalScores.yahtzees>1?100*r.totalScores.yahtzees:0,d=o+l+i+u;return a.a.createElement(a.a.Fragment,null,r.allScoresScored?a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"THE GAME IS OVER! "),a.a.createElement("h2",null,"Final Score: ",d),a.a.createElement("div",{className:"bonus-scores"},0!==i&&a.a.createElement("span",{className:"bonus-scores__upper"},"Upper Bonus:",a.a.createElement("span",null,i)),0!==u&&a.a.createElement("span",{className:"bonus-scores__yathzee"},"Yahtzee Bonus:",a.a.createElement("span",{className:"bonus-scores__score"},u)))):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"title-card"},a.a.createElement("h1",{className:"title-card__main"},"Yahtzee Redux!"),a.a.createElement("h2",{className:"title-card__upper"},"Upper"),a.a.createElement("h2",{className:"title-card__lower"},"Lower")),a.a.createElement(v,{dice:r.currentDice,diceRoll:r.currentDiceRoll,dispatchGameState:n,canScore:r.currentDiceRoll>0}),a.a.createElement("div",{className:"dice-wrapper"},a.a.createElement("div",{className:"round-tracker"},a.a.createElement("h2",null,"Roll"),Array.from({length:3},function(e,t){var c="round-tracker__counter".concat(t<r.currentDiceRoll?" round-tracker__counter--counted":"");return a.a.createElement("div",{className:c})})),a.a.createElement(f,{dispatchGameState:n,isOutOfRolls:3===r.currentDiceRoll,isFirstRound:0===r.currentDiceRoll}))))};o.a.render(a.a.createElement(N,null),document.getElementById("root"))}],[[7,1,2]]]);
//# sourceMappingURL=main.c04ba917.chunk.js.map